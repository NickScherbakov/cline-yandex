# Руководство по настройке Yandex Cloud для YandexGPT

Данное руководство поможет вам настроить доступ к API YandexGPT через Yandex Cloud.

## Шаг 1: Создание аккаунта Yandex Cloud

1. Перейдите на сайт [Yandex Cloud](https://cloud.yandex.ru/).
2. Нажмите на кнопку "Начать бесплатно" и создайте аккаунт, если у вас его еще нет.
3. После регистрации войдите в консоль управления Yandex Cloud.

## Шаг 2: Создание платежного аккаунта

1. В консоли Yandex Cloud нажмите на "Платежный аккаунт" в левом меню.
2. Создайте платежный аккаунт, следуя инструкциям на экране.
3. Добавьте данные банковской карты для оплаты услуг.

## Шаг 3: Создание каталога

1. В консоли Yandex Cloud нажмите на "Создать каталог".
2. Введите имя каталога (например, "YandexGPT Projects").
3. Нажмите "Создать".
4. После создания каталога, запишите его ID. Этот ID вам понадобится для настройки библиотеки `yandex-cloud-connector`.

## Шаг 4: Создание сервисного аккаунта

1. Перейдите в раздел "Сервисные аккаунты" в меню слева.
2. Нажмите на кнопку "Создать сервисный аккаунт".
3. Введите имя сервисного аккаунта (например, "yandexgpt-api").
4. Выберите роли для сервисного аккаунта. Для работы с YandexGPT необходимо выбрать роль `ai.languageModels.user`.
5. Нажмите "Создать".

## Шаг 5: Создание API-ключа

1. Перейдите в раздел "Сервисные аккаунты" и выберите созданный вами сервисный аккаунт.
2. Перейдите на вкладку "API-ключи".
3. Нажмите на кнопку "Создать API-ключ".
4. Введите описание для API-ключа (например, "YandexGPT API Key").
5. Нажмите "Создать".
6. **ВАЖНО**: Скопируйте и сохраните сгенерированный API-ключ. Он будет показан только один раз и потом его нельзя будет посмотреть снова.

## Шаг 6: Настройка библиотеки yandex-cloud-connector

После получения ID каталога и API-ключа вы можете настроить библиотеку `yandex-cloud-connector`:

```typescript
import { YandexCloudConnector } from 'yandex-cloud-connector';

// Инициализация коннектора
const connector = new YandexCloudConnector({
  apiKey: 'ваш-api-ключ', // API-ключ, полученный на шаге 5
  folderId: 'ваш-folder-id', // ID каталога, полученный на шаге 3
  modelId: 'yandexgpt' // Выбор модели
});
```

## Доступные модели YandexGPT

Библиотека `yandex-cloud-connector` поддерживает следующие модели:

| Идентификатор | Описание | Максимальное количество токенов | Поддержка потокового режима |
|---------------|----------|--------------------------------|----------------------------|
| `yandexgpt`   | Полная версия YandexGPT. Лучше всего подходит для сложных задач, генерации кода, анализа текстов. | 8192 | Да |
| `yandexgpt-lite` | Облегченная версия YandexGPT. Подходит для быстрых ответов и диалогов. | 8192 | Да |
| `summarization` | Специализированная модель для суммаризации текстов и документов. | 8192 | Нет |

## Проверка настроек

Для проверки правильности настроек вы можете выполнить следующий код:

```typescript
import { YandexCloudConnector } from 'yandex-cloud-connector';

async function testConnection() {
  try {
    const connector = new YandexCloudConnector({
      apiKey: 'ваш-api-ключ',
      folderId: 'ваш-folder-id',
      modelId: 'yandexgpt-lite' // Используем облегченную модель для теста
    });
    
    const response = await connector.createCompletionSync(
      'Ты - полезный ассистент.',
      [{ role: 'user', content: 'Привет! Как тебя зовут?' }]
    );
    
    console.log('Ответ от YandexGPT:', response);
    console.log('Подключение успешно настроено!');
  } catch (error) {
    console.error('Ошибка подключения к YandexGPT:', error);
  }
}

testConnection();
```

## Что делать в случае ошибок

### Ошибка аутентификации

Если вы получаете ошибку аутентификации, проверьте:
- Правильность введенного API-ключа
- Правильность введенного ID каталога
- Наличие необходимых разрешений у сервисного аккаунта

### Ошибка превышения квоты

Если вы получаете ошибку превышения квоты:
- Проверьте лимиты использования в вашем аккаунте Yandex Cloud
- При необходимости увеличьте квоту через техническую поддержку Yandex Cloud

### Другие ошибки

Для других ошибок обратитесь к [официальной документации YandexGPT](https://cloud.yandex.ru/docs/yandexgpt/concepts/intro) или в техническую поддержку Yandex Cloud.